<Window x:Class="GroupeV.EditProductWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ã‰diteur de Produit" 
        MinHeight="650" MinWidth="480"
        Height="750" Width="580"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True">

    <Border CornerRadius="24" Background="{StaticResource NeuBackgroundBrush}">
        <Border.Effect>
            <DropShadowEffect Color="{StaticResource NeuDarkShadow}" BlurRadius="40" ShadowDepth="12" Direction="315" Opacity="0.45"/>
        </Border.Effect>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <Border Grid.Row="0" Padding="28,22">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock x:Name="HeaderTextBlock" Text="Modifier le Produit" 
                               FontFamily="{StaticResource NeuFontFamily}" FontSize="22" FontWeight="Bold"
                               Foreground="{StaticResource NeuTextPrimaryBrush}" HorizontalAlignment="Center"/>
                    <TextBlock Text="Gestion des produits" 
                               FontFamily="{StaticResource NeuFontFamily}" FontSize="12"
                               Foreground="{StaticResource NeuTextSecondaryBrush}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                </StackPanel>
            </Border>

            <!-- MAIN CONTENT -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="36,8,36,20">
                    <!-- Status -->
                    <Border Style="{StaticResource NeuCardInset}" Padding="12" Margin="0,0,0,18"
                            Visibility="Collapsed" x:Name="StatusBorder">
                        <TextBlock x:Name="StatusTextBlock" Text="" FontFamily="{StaticResource NeuFontFamily}" 
                                   FontSize="12" Foreground="{StaticResource NeuTextPrimaryBrush}"
                                   TextWrapping="Wrap" TextAlignment="Center" FontWeight="SemiBold"/>
                    </Border>

                    <!-- Product ID (edit mode) -->
                    <Border Style="{StaticResource NeuCardInset}" Padding="10" Margin="0,0,0,14"
                            x:Name="ProductIdBorder" Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ID Produit : " FontFamily="{StaticResource NeuFontFamily}" FontSize="12" 
                                       Foreground="{StaticResource NeuTextSecondaryBrush}"/>
                            <TextBlock x:Name="ProductIdTextBlock" Text="0" FontFamily="{StaticResource NeuMonoFont}" 
                                       FontSize="12" Foreground="{StaticResource NeuAccentBrush}" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>

                    <!-- Description -->
                    <TextBlock Text="Description du produit *" FontFamily="{StaticResource NeuFontFamily}" FontSize="12" 
                               Foreground="{StaticResource NeuTextSecondaryBrush}" FontWeight="SemiBold" Margin="4,0,0,6"/>
                    <TextBox x:Name="DescriptionTextBox" Style="{StaticResource NeuTextBox}" Margin="0,0,0,16"
                             Height="80" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                             MaxLength="255"/>

                    <!-- Prix -->
                    <TextBlock Text="Prix (â‚¬) *" FontFamily="{StaticResource NeuFontFamily}" FontSize="12" 
                               Foreground="{StaticResource NeuTextSecondaryBrush}" FontWeight="SemiBold" Margin="4,0,0,6"/>
                    <TextBox x:Name="PriceTextBox" Style="{StaticResource NeuTextBox}" Margin="0,0,0,16"
                             MaxLength="15"/>

                    <!-- CatÃ©gorie -->
                    <TextBlock Text="CatÃ©gorie *" FontFamily="{StaticResource NeuFontFamily}" FontSize="12" 
                               Foreground="{StaticResource NeuTextSecondaryBrush}" FontWeight="SemiBold" Margin="4,0,0,6"/>
                    <ComboBox x:Name="CategoryComboBox" Style="{StaticResource NeuComboBox}"
                              DisplayMemberPath="Libelle" SelectedValuePath="IdCategorie" Margin="0,0,0,16"/>

                    <!-- Type de vente -->
                    <TextBlock Text="Type de vente *" FontFamily="{StaticResource NeuFontFamily}" FontSize="12" 
                               Foreground="{StaticResource NeuTextSecondaryBrush}" FontWeight="SemiBold" Margin="4,0,0,6"/>
                    <ComboBox x:Name="TypeVenteComboBox" Style="{StaticResource NeuComboBox}" Margin="0,0,0,16"
                              SelectedIndex="0">
                        <ComboBoxItem Content="ðŸ›’ Vente Standard" Tag="0"/>
                        <ComboBoxItem Content="ðŸ‘¥ Vente Groupe" Tag="1"/>
                        <ComboBoxItem Content="ðŸ”¨ EnchÃ¨re (Bid)" Tag="2"/>
                    </ComboBox>

                    <!-- Image section -->
                    <TextBlock Text="Image du produit (optionnel)" FontFamily="{StaticResource NeuFontFamily}" FontSize="12" 
                               Foreground="{StaticResource NeuTextSecondaryBrush}" FontWeight="SemiBold" Margin="4,0,0,6"/>

                    <!-- Image Preview -->
                    <Border x:Name="ImagePreviewBorder" Style="{StaticResource NeuCardInset}" 
                            CornerRadius="14" Height="140" Margin="0,0,0,10" ClipToBounds="True"
                            AllowDrop="True" Drop="ImageDrop_Drop" DragOver="ImageDrop_DragOver"
                            Cursor="Hand" MouseLeftButtonUp="ImagePreview_Click">
                        <Grid>
                            <Image x:Name="ImagePreview" Stretch="Uniform" 
                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                            <StackPanel x:Name="ImageDropPlaceholder" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ“·" FontSize="32" HorizontalAlignment="Center"/>
                                <TextBlock Text="Glissez-dÃ©posez une image ici" 
                                           FontFamily="{StaticResource NeuFontFamily}" FontSize="12"
                                           Foreground="{StaticResource NeuTextSecondaryBrush}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                <TextBlock Text="ou cliquez pour parcourir" 
                                           FontFamily="{StaticResource NeuFontFamily}" FontSize="11"
                                           Foreground="{StaticResource NeuAccentBrush}" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <TextBox x:Name="ImageUrlTextBox" Style="{StaticResource NeuTextBox}" Margin="0,0,0,10"
                             IsReadOnly="True" FontSize="11" MaxLength="255"/>

                    <!-- Image Alt -->
                    <TextBlock Text="Texte alternatif (optionnel)" FontFamily="{StaticResource NeuFontFamily}" FontSize="12" 
                               Foreground="{StaticResource NeuTextSecondaryBrush}" FontWeight="SemiBold" Margin="4,0,0,6"/>
                    <TextBox x:Name="ImageAltTextBox" Style="{StaticResource NeuTextBox}" Margin="0,0,0,20"
                             MaxLength="255"/>

                    <!-- Action Buttons -->
                    <Grid Margin="0,8,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Content="Annuler" Style="{StaticResource NeuButton}"
                                Click="CancelButton_Click" Height="44" Margin="0,0,6,0"/>
                        <Button Grid.Column="1" x:Name="SaveButton" Content="Enregistrer" 
                                Style="{StaticResource NeuButtonAccent}"
                                Click="SaveButton_Click" Height="44" Margin="6,0,0,0"/>
                    </Grid>

                    <!-- Delete Button (edit mode) -->
                    <Button x:Name="DeleteButton" Content="Supprimer le produit" 
                            Style="{StaticResource NeuButtonDanger}"
                            Click="DeleteButton_Click" Height="38" Margin="0,14,0,0" Visibility="Collapsed"/>
                </StackPanel>
            </ScrollViewer>

            <!-- FOOTER -->
            <Border Grid.Row="2" Padding="24,12">
                <TextBlock x:Name="FooterTextBlock" Text="PrÃªt" FontFamily="{StaticResource NeuMonoFont}" FontSize="11" 
                           Foreground="{StaticResource NeuTextSecondaryBrush}" HorizontalAlignment="Center"/>
            </Border>
        </Grid>
    </Border>
</Window>
